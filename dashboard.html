<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>لوحة التحكم | ERP PRO</title>
  <link rel="manifest" href="pwa/manifest.json">
  <meta name="theme-color" content="#0b1220">
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo-dot"></div>
        <div>
          <h1>ERP PRO</h1>
          <div class="badge">لوحة التحكم</div>
        </div>
      </div>
      <div class="actions">
        <div class="btn" title="المستخدم">
          <span id="user">—</span>
        </div>
        <button class="btn danger" onclick="erpLogout()" title="خروج">
          خروج
        </button>
      </div>
    </div>

    <div class="navbar" id="nav" aria-label="القائمة الرئيسية">
      <!-- pills injected -->
    </div>
  </div>

  <div class="container">
    <div class="grid">
      <div class="card">
        <div class="card-header">
          <h2 class="card-title">ملخص سريع</h2>
        </div>
        <div class="card-body">
          <div class="kpi">
            <div class="k"><div class="muted">الشركة</div><div class="v" id="companyName">—</div></div>
            <div class="k"><div class="muted">العملة الأساسية</div><div class="v" id="baseCurrency">—</div></div>
            <div class="k"><div class="muted">تعدد العملات</div><div class="v" id="multiCurrency">—</div></div>
            <div class="k"><div class="muted">سياسة التسعير</div><div class="v" id="pricingPolicy">—</div></div>
          </div>
          <div style="height:10px"></div>
          <div class="notice">
            ✅ الأزرار تظهر حسب صلاحيات المستخدم (permissions). CFO Reports تظهر للأدمن فقط.
          </div>
        </div>
      </div>

      <div class="card" data-section="company" style="display:none">
        <div class="card-header">
          <h2 class="card-title">الإعدادات</h2>
          <a class="btn" href="company.html">فتح</a>
        </div>
        <div class="card-body" id="tilesCompany"></div>
      </div>

      <div class="card" data-section="accounts" style="display:none">
        <div class="card-header">
          <h2 class="card-title">الحسابات</h2>
          <a class="btn" href="accounts.html">فتح</a>
        </div>
        <div class="card-body" id="tilesAccounts"></div>
      </div>

      <div class="card" data-section="invoices" style="display:none">
        <div class="card-header">
          <h2 class="card-title">الفواتير</h2>
          <a class="btn" href="invoices.html">فتح</a>
        </div>
        <div class="card-body" id="tilesInvoices"></div>
      </div>

      <div class="card" data-section="vouchers" style="display:none">
        <div class="card-header">
          <h2 class="card-title">السندات</h2>
          <a class="btn" href="vouchers.html">فتح</a>
        </div>
        <div class="card-body" id="tilesVouchers"></div>
      </div>

      <div class="card" data-section="inventory" style="display:none">
        <div class="card-header">
          <h2 class="card-title">المواد</h2>
          <a class="btn" href="inventory.html">فتح</a>
        </div>
        <div class="card-body" id="tilesInventory"></div>
      </div>

      <div class="card" data-section="manufacturing" style="display:none">
        <div class="card-header">
          <h2 class="card-title">التصنيع</h2>
          <a class="btn" href="manufacturing.html">فتح</a>
        </div>
        <div class="card-body" id="tilesMfg"></div>
      </div>

      <div class="card" data-section="reports" style="display:none">
        <div class="card-header">
          <h2 class="card-title">التقارير</h2>
          <a class="btn" href="reports.html">فتح</a>
        </div>
        <div class="card-body" id="tilesReports"></div>
      </div>

      <div class="card" data-section="cfo" style="display:none">
        <div class="card-header">
          <h2 class="card-title">CFO Reports</h2>
          <a class="btn" href="cfo.html">فتح</a>
        </div>
        <div class="card-body" id="tilesCfo"></div>
      </div>
    </div>
  </div>

  <div class="footer container">ERP PRO ©</div>

  <script type="module">
    import "./pwa/register-sw.js";
  </script>
  <script type="module" src="js/dashboard.js"></script>
</body>
</html>
